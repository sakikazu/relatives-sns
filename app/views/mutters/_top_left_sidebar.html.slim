.well.sidebar-nav
  legend.text-center
    | ― 日齢 ― 生まれて何日？
  #nichirei
    - if @nichirei
      .main
        = @nichirei
        | 日
      - @nichirei_future.each do |n|
        = "#{n[0]}日: #{n[1].strftime("%Y/%m/%d")}"
        br
    - else
      |  ※生年月日を登録している人のみ 

.well.sidebar-nav
  = render 'anniversary'

.well.sidebar-nav
  legend.text-center
    | みんなの新着情報
  = link_to '一気に見る', update_allview_mutters_path, class: "btn btn-danger btn-block"
  table.table.table-striped.table-condensed.mgn-t20
    = render :partial => "update_history"
    tr
      td
        = link_to "すべて見る", {:action => :update_history_all}, class: "btn btn-success btn-block"

.well.sidebar-nav
  legend.text-center
    | みんなのアクセス情報
  p.important.text-center
    | 現在 
    = User::recent_request_count
    |  人がログインしています
  table.table.table-striped.table-sm
    - @login_users.each_with_index do |user, idx|
      - tr_options = idx > 20 ? { class: 'hide_row', style: 'display:none' } : {}
      = content_tag(:tr, tr_options) do
        td[style="width:5em"]
          = user.last_request_at.present? ? time_shorter(user.last_request_at, { noyear: true }) : "未ログイン"
        td
          = user.dispname(User::FULLNICK)
  #link_recent_login_users.btn.btn-success.btn-block[onclick="javascript:show_recent_login_users()"]
    | もっと見る(直近40人分)
